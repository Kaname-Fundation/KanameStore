!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Terminal=t():e.Terminal=t()}(self,()=>(()=>{"use strict";var __webpack_modules__={836(e,t,n){function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function o(e,t){return e(t={exports:{}},t.exports),t.exports}n.d(t,{az:()=>m});var i=o(function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r},e.exports.default=e.exports,e.exports.__esModule=!0});r(i);var u=o(function(e){e.exports=function(e){if(Array.isArray(e))return i(e)},e.exports.default=e.exports,e.exports.__esModule=!0});r(u);var a=o(function(e){e.exports=function(e){if("u">typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0});r(a);var c=o(function(e){e.exports=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0});r(c);var s=o(function(e){e.exports=function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0});r(s);var l=r(o(function(e){e.exports=function(e){return u(e)||a(e)||c(e)||s()},e.exports.default=e.exports,e.exports.__esModule=!0}));function f(e,t){for(var n=[],r=[],o=arguments.length;2<o--;)n.push(arguments[o]);for(;n.length;){var i=n.pop();if(i&&i.pop)for(o=i.length;o--;)n.push(i[o]);else null!=i&&!0!==i&&!1!==i&&r.push(i)}return"function"==typeof e?e(t||{},r):{nodeName:e,attributes:t||{},children:r,key:t&&t.key}}function d(e,t,n,r){function o(e){return{nodeName:e.nodeName.toLowerCase(),attributes:{},children:w.call(e.childNodes,function(e){return 3===e.nodeType?e.nodeValue:o(e)})}}function i(e){return"function"==typeof e?i(e(N,E)):null==e?"":e}function u(){b=!b;var e=i(n);for(r&&!b&&(j=x(r,j,k,k=e)),_=!1;S.length;)S.pop()()}function a(){b||(b=!0,setTimeout(u))}function c(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}function s(e,t,n){var r={};return e.length?(r[e[0]]=1<e.length?s(e.slice(1),t,n[e[0]]):t,c(n,r)):t}function l(e,t){for(var n=0;n<e.length;)t=t[e[n++]];return t}function f(e,t,n){for(var r in n)"function"==typeof n[r]?function(r,o){n[r]=function(r){var i=o(r);return"function"==typeof i&&(i=i(l(e,N),n)),i&&i!==(t=l(e,N))&&!i.then&&a(N=s(e,c(t,i),N)),i}}(r,n[r]):f(e.concat(r),t[r]=c(t[r]),n[r]=c(n[r]));return n}function d(e){return e?e.key:null}function p(e){return e.currentTarget.events[e.type](e)}function v(e,t,n,r,o){if("key"===t);else if("style"!==t)"o"===t[0]&&"n"===t[1]?(t=t.slice(2),e.events?r||(r=e.events[t]):e.events={},e.events[t]=n,n?r||e.addEventListener(t,p):e.removeEventListener(t,p)):t in e&&"list"!==t&&"type"!==t&&"draggable"!==t&&"spellcheck"!==t&&"translate"!==t&&!o?e[t]=null==n?"":n:null!=n&&!1!==n&&e.setAttribute(t,n),(null==n||!1===n)&&e.removeAttribute(t);else if("string"==typeof n)e.style.cssText=n;else for(var i in"string"==typeof r&&(r=e.style.cssText=""),c(r,n)){var u=null==n||null==n[i]?"":n[i];"-"===i[0]?e.style.setProperty(i,u):e.style[i]=u}}function h(e,t){var n="string"==typeof e||"number"==typeof e?document.createTextNode(e):(t=t||"svg"===e.nodeName)?document.createElementNS("http://www.w3.org/2000/svg",e.nodeName):document.createElement(e.nodeName),r=e.attributes;if(r){r.oncreate&&S.push(function(){r.oncreate(n)});for(var o=0;o<e.children.length;o++)n.appendChild(h(e.children[o]=i(e.children[o]),t));for(var u in r)v(n,u,r[u],null,t)}return n}function m(e,t,n,r){for(var o in c(t,n))n[o]!==("value"==o||"checked"===o?e[o]:t[o])&&v(e,o,n[o],t[o],r);var i=_?n.oncreate:n.onupdate;i&&S.push(function(){i(e,t)})}function y(e,t){var n=t.attributes;if(n){for(var r=0;r<t.children.length;r++)y(e.childNodes[r],t.children[r]);n.ondestroy&&n.ondestroy(e)}return e}function g(e,t,n){function r(){e.removeChild(y(t,n))}var o=n.attributes&&n.attributes.onremove;o?o(t,r):r()}function x(e,t,n,r,o){if(r===n);else if(null==n||n.nodeName!==r.nodeName){var u=h(r,o);e.insertBefore(u,t),null!=n&&g(e,t,n),t=u}else if(null==n.nodeName)t.nodeValue=r;else{m(t,n.attributes,r.attributes,o=o||"svg"===r.nodeName);for(var a={},c={},s=[],l=n.children,f=r.children,p=0;p<l.length;p++){s[p]=t.childNodes[p];var v=d(l[p]);null!=v&&(a[v]=[s[p],l[p]])}for(var p=0,y=0;y<f.length;){var v=d(l[p]),b=d(f[y]=i(f[y]));if(c[v]){p++;continue}if(null!=b&&b===d(l[p+1])){null==v&&g(t,s[p],l[p]),p++;continue}if(null==b||_)null==v&&(x(t,s[p],l[p],f[y],o),y++),p++;else{var w=a[b]||[];v===b?(x(t,w[0],w[1],f[y],o),p++):w[0]?x(t,t.insertBefore(w[0],s[p]),w[1],f[y],o):x(t,s[p],null,f[y],o),c[b]=f[y],y++}}for(;p<l.length;)null==d(l[p])&&g(t,s[p],l[p]),p++;for(var p in a)c[p]||g(t,a[p][0],a[p][1])}return t}var b,w=[].map,j=r&&r.children[0]||null,k=j&&o(j),S=[],_=!0,N=c(e),E=f([],N,c(t));return a(),E}var p=function(e,t){return"number"==typeof e?"".concat(e,"px"):!1===e?t:e},v={grow:function(e){return{flexGrow:e}},shrink:function(e){return{flexShrink:e}},basis:function(e){return{flexBasis:p(e,"auto")}},align:function(e){return{alignItems:e}},justify:function(e){return{justifyContent:e}},padding:function(e){return{margin:p(e,"0")}},margin:function(e){return{margin:p(e,"0")}}},h=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=["osjs-gui"].concat(l(e.class instanceof Array?e.class:[e.class]));e.orientation&&n.push("osjs-gui-"+e.orientation);var r="string"==typeof e.style?{}:Object.assign({},e.style||{}),o=Object.keys(e).reduce(function(t,n){return Object.assign({},t,v[n]?v[n](e[n]):void 0)},r);return f("div",{oncreate:e.oncreate,ondestroy:e.ondestroy,class:n.filter(function(e){return!!e}).join(" "),style:o},t)},m=function(e,t){return f(h,Object.assign({orientation:"horizontal"},e,{class:["osjs-gui-box",e.class]}),t)},y=r(o(function(e){function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0,t(n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0})),g=function(e){var t=e&&"object"===y(e)?e.src:e;return f("i",{"data-icon":e&&"object"===y(e)?e.name:void 0,class:"osjs-icon",style:{backgroundImage:"string"==typeof e?"url(".concat(t,")"):void 0}})},x=r(o(function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0})),b=function(e,t){return Object.keys(e).filter(function(e){return -1===t.indexOf(e)}).reduce(function(t,n){return Object.assign(x({},n,e[n]),t)},{})},w=function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:250,n=!1;return function(r,o){return(e=clearTimeout(e),e=setTimeout(function(){return n=!1},t),n)?(r.preventDefault(),o(r)):(n=!0,!1)}},j=function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=function(e){var t=[];return"checkbox"===e.type||"boolean"==typeof e.checked?t.push(f("span",{class:"osjs-gui-menu-checkbox "+(e.checked?"active":"")})):e.icon&&t.push(f(g,e.icon)),t.push(f("span",{},e.label)),t},i=function(t,n){if("function"==typeof n.element)return n.element();var i=[f("span",{class:"separator"===n.type?"osjs-gui-menu-separator":"osjs-gui-menu-label "+(n.disabled?"osjs__disabled":"")},o(n))];return n.items&&i.push(e(t,n.items,r+1)),i};return f("ul",{class:""},n.map(function(e){return f("li",{class:"osjs-gui-menu-entry"},[f("div",{class:"osjs-gui-menu-container","data-has-image":!!e.icon||void 0,"data-has-children":!!e.items||void 0,onmouseover:e.items?t.onshow:void 0,ontouchend:e.items?t.onshow:void 0,onclick:function(n){e.items||(e.onclick&&e.onclick(e,n),t.onclick&&t.onclick(e,n,e))}},i(t,e))])}))},k=function(e){return f("div",{id:"osjs-context-menu",className:"osjs-gui osjs-gui-menu",oncreate:e.oncreate,onupdate:e.onupdate,style:{display:!1===e.visible?"none":"block",top:e.position?e.position.top+"px":0,left:e.position?e.position.left+"px":0}},j(e,e.menu))};function S(e,t,n,r){return t._$r=function(){return{}},function(o,i){return f(r||"x-",{key:o.key,id:o.id,class:o.class,oncreate:function(r){var u=d(e,t,function(e,t){var o=n(e,t);return"function"==typeof o&&(o=o(r._$p,r._$c)),o},r);r._$p=o,r._$c=i,r._$r=u._$r,r._$u=u.uninit,u.init&&u.init(o),o.oncreate&&o.oncreate(r)},onupdate:function(e){e._$p=o,e._$c=i,e._$r(),o.onupdate&&o.onupdate(e)},ondestroy:function(e){e._$u&&e._$u()},onremove:function(e,t){return o.onremove?void o.onremove(e,t):t()}})}}var _=function(e,t,n){var r=Math.min,o=e.target,i=e.clientX,u=e.clientY,a=o.previousSibling,c=a.offsetWidth,s=a.offsetHeight,l=Array.from(o.parentNode.children).indexOf(a),f=.8*a.parentNode.offsetWidth,d=.8*a.parentNode.offsetHeight;if(!(0>l)){var p=function(e){e.preventDefault();var o="vertical"===n?c:s;o="vertical"===n?r(f,o+(e.clientX-i)):r(d,o+(e.clientY-u)),t.setSize({index:l,size:o})},v=function e(t){t.preventDefault(),document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",e)};e.preventDefault(),document.addEventListener("mousemove",p),document.addEventListener("mouseup",v)}},N=function(e,t,n,r){var o=Array(Math.ceil(n.length/2)).fill(null).map(function(){return f("div",{class:"osjs-gui-panes-spacer",onmousedown:function(e){return _(e,t,r)}})});return n.map(function(t,n){var r=e.sizes[n]?e.sizes[n]+"px":void 0;return f("div",{class:"osjs-gui-panes-pane",style:{flex:r?"0 0 ".concat(r):r}},t)}).map(function(e,t){return[e,o[t]]}).reduce(function(e,t){return e.concat(t)}).filter(function(e){return void 0!==e})},E=(S({sizes:[]},{init:function(e){return{sizes:e.sizes||[150]}},setSize:function(e){var t=e.index,n=e.size;return function(e){var r=[].concat(e.sizes);return r[t]=n,{sizes:r}}}},function(e,t){return function(n,r){var o=n.orientation||"vertical";return f(h,{orientation:o,class:"osjs-gui-panes-inner"},N(e,t,r,o))}},"div"),w()),L=w(),O=function(e,t,n){var r=e.labels,o=e.onchange,i=e.oncontextmenu;return(r||[]).map(function(e,r){return f("div",{class:t.selectedIndex===r?"osjs__active":"",oncontextmenu:function(t){(i||function(){})(t,r,e)},onclick:function(t){n.setSelectedIndex(r),(o||function(){})(t,r,e)}},f("span",{},e))})},T=function(e,t){return t.map(function(t,n){return f("div",{class:e.selectedIndex===n?"osjs__active":""},t)})},I=(S({selectedIndex:0},{init:function(e){return{selectedIndex:e.selectedIndex||0}},setSelectedIndex:function(e){return function(){return{selectedIndex:e}}}},function(e,t){return function(n,r){return f("div",{class:"osjs-gui-tabs-wrapper"},[f("div",{class:"osjs-gui-tabs-header"},O(n,e,t)),f("div",{class:"osjs-gui-tabs-panes"},T(e,r))])}},"div"),S({active:!0},{init:function(e){return{ative:!1!==e.active}},ontoggle:function(e){var t=e.ev,n=e.active;return(e.ontoggle||function(){})(t,n),{active:n}}},function(e,t){return function(n,r){return f(h,Object.assign({},n.box||{},{class:["osjs-gui-expander-wrapper"]}),[f("div",{class:"osjs-gui-expander-header",onclick:function(r){return t.ontoggle({ev:r,active:!e.active,ontoggle:n.ontoggle})}},[f("div",{class:"osjs-gui-expander-header-icon","data-active":e.active+""}),f("div",{class:"osjs-gui-expander-header-label"},n.label)]),f("div",{class:"osjs-gui-expander-content",style:{display:!1===e.active?"none":void 0}},r)])}},"div"),r(o(function(e){function t(e,t,n,r,o,i,u){try{var a=e[i](u),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise(function(o,i){function u(e){t(c,o,i,u,a,"next",e)}function a(e){t(c,o,i,u,a,"throw",e)}var c=e.apply(n,r);u(void 0)})}},e.exports.default=e.exports,e.exports.__esModule=!0}))),P=r(o(function(e){e.exports=function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0})),$=r(o(function(e){function t(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e},e.exports.default=e.exports,e.exports.__esModule=!0})),A=o(function(e){var t=function(e){function t(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}function n(e,t,n,r){var i=Object.create((t&&t.prototype instanceof o?t:o).prototype);return i._invoke=s(e,n,new p(r||[])),i}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function o(){}function i(){}function u(){}function a(e){["next","throw","return"].forEach(function(n){t(e,n,function(e){return this._invoke(n,e)})})}function c(e,t){var n;function o(n,i,u,a){var c=r(e[n],e,i);if("throw"===c.type)a(c.arg);else{var s=c.arg,l=s.value;return l&&"object"==typeof l&&g.call(l,"__await")?t.resolve(l.__await).then(function(e){o("next",e,u,a)},function(e){o("throw",e,u,a)}):t.resolve(l).then(function(e){s.value=e,u(s)},function(e){return o("throw",e,u,a)})}}function i(e,r){function i(){return new t(function(t,n){o(e,r,t,n)})}return n=n?n.then(i,i):i()}this._invoke=i}function s(e,t,n){var o="suspendedStart";return function(i,u){if("executing"===o)throw Error("Generator is already running");if("completed"===o){if("throw"===i)throw u;return h()}for(n.method=i,n.arg=u;;){var a=n.delegate;if(a){var c=l(a,n);if(c){if(c===k)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===o)throw o="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o="executing";var s=r(e,t,n);if("normal"===s.type){if(o=n.done?"completed":"suspendedYield",s.arg===k)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o="completed",n.method="throw",n.arg=s.arg)}}}function l(e,t){var n=e.iterator[t.method];if(n===m){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=m,l(e,t),"throw"===t.method))return k;t.method="throw",t.arg=TypeError("The iterator does not provide a 'throw' method")}return k}var o=r(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,k;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=m),t.delegate=null,k):i:(t.method="throw",t.arg=TypeError("iterator result is not an object"),t.delegate=null,k)}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function d(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function p(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function v(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(g.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=m,t.done=!0,t};return r.next=r}}return{next:h}}function h(){return{value:m,done:!0}}var m,y=Object.prototype,g=y.hasOwnProperty,x="function"==typeof Symbol?Symbol:{},b=x.iterator||"@@iterator",w=x.asyncIterator||"@@asyncIterator",j=x.toStringTag||"@@toStringTag";try{t({},"")}catch(e){t=function(e,t,n){return e[t]=n}}e.wrap=n;var k={},S={};t(S,b,function(){return this});var _=Object.getPrototypeOf,N=_&&_(_(v([])));N&&N!==y&&g.call(N,b)&&(S=N);var E=u.prototype=o.prototype=Object.create(S);return i.prototype=u,t(E,"constructor",u),t(u,"constructor",i),i.displayName=t(u,j,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,t(e,j,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},a(c.prototype),t(c.prototype,w,function(){return this}),e.AsyncIterator=c,e.async=function(t,r,o,i,u){void 0===u&&(u=Promise);var a=new c(n(t,r,o,i),u);return e.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},a(E),t(E,j,"Generator"),t(E,b,function(){return this}),t(E,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=v,p.prototype={constructor:p,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=m,this.done=!1,this.delegate=null,this.method="next",this.arg=m,this.tryEntries.forEach(d),!e)for(var t in this)"t"===t.charAt(0)&&g.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=m)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,r){return i.type="throw",i.arg=e,n.next=t,r&&(n.method="next",n.arg=m),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;0<=r;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var u=g.call(o,"catchLoc"),a=g.call(o,"finallyLoc");if(u&&a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else if(a){if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else throw Error("try statement without catch or finally")}}},abrupt:function(e,t){for(var n,r=this.tryEntries.length-1;0<=r;--r)if((n=this.tryEntries[r]).tryLoc<=this.prev&&g.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,k):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),k},finish:function(e){for(var t,n=this.tryEntries.length-1;0<=n;--n)if((t=this.tryEntries[n]).finallyLoc===e)return this.complete(t.completion,t.afterLoc),d(t),k},catch:function(e){for(var t,n=this.tryEntries.length-1;0<=n;--n)if((t=this.tryEntries[n]).tryLoc===e){var r=t.completion;if("throw"===r.type){var o=r.arg;d(t)}return o}throw Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:v(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=m),k}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}),M=function(e,t){var n=t.target.querySelector("ul");n&&(n.classList.contains("osjs-gui-menu-container")&&(n=n.parentNode.parentNode),n&&n.offsetParent)&&(n.classList.remove("clamp-right"),n.getBoundingClientRect().right>e.offsetWidth&&n.classList.add("clamp-right"))},z=function(e,t,n){var r={},o=n.top+t.offsetHeight,i=n.left+t.offsetWidth,u=e.offsetHeight-n.top,a=e.offsetWidth-n.left,c=i>e.offsetWidth,s=o>e.offsetHeight;return s&&e.offsetHeight>t.offsetHeight&&(r.top=e.offsetHeight-t.offsetHeight-u),c&&(r.left=e.offsetWidth-t.offsetWidth-a),s||c?r:null},C=function(e){return function(t,n){return f(k,{position:t.position,visible:t.visible,menu:t.menu,onclick:e,onshow:n.onshow})}},U=function(e){return e(),setTimeout(e,100)},W=function(){function e(t){P(this,e),this.core=t,this.callback=function(){},this.actions=null,this.$element=document.createElement("div")}return $(e,[{key:"destroy",value:function(){this.callback=null,this.actions=null}},{key:"init",value:function(){var e,t=this;this.$element.className="osjs-system-context-menu",this.core.$root.appendChild(this.$element);var n=!1;this.actions=d({visible:!1,menu:[],position:{top:0,left:0}},{clamp:function(n){return function(r){if(n=n||document.querySelector("#osjs-context-menu"),clearTimeout(e),n){var o=z(t.core.$root,n,r.position);if(o)return{position:o}}return{}}},onshow:function(n){return function(){e=U(function(){return M(t.core.$root,n)})}},show:function(e){return function(r,o){var i=e.menu,u=e.position;if(e.toggle&&n)return o.hide();if(u instanceof Event)u={left:u.clientX,top:u.clientY};else if(u instanceof Element){var a=u.getBoundingClientRect();u={left:a.left,top:a.top+a.height}}return t.callback=function(t,n,r){e.callback&&e.callback(t,n),!1!==r.closeable&&o.hide()},n=!0,t.onclose=e.onclose,U(function(){return o.clamp()}),{visible:!0,menu:i||[],position:u||{top:0,left:0}}}},hide:function(){return function(){return n&&setTimeout(function(){return n=!1},0),t.onclose&&t.onclose(),t.onclose=null,t.callback=null,{visible:!1}}}},C(function(){!t.core.destroyed&&t.callback&&t.callback.apply(t,arguments)}),this.$element)}},{key:"show",value:function(){var e;return this.actions?(e=this.actions).show.apply(e,arguments):null}},{key:"hide",value:function(){var e;return this.actions?(e=this.actions).hide.apply(e,arguments):null}}]),e}(),G=function(e){var t=e.target,n="TEXTAREA"===t.tagName;return n||"INPUT"!==t.tagName||(n=-1!==["text","password","number","email"].indexOf(t.type)),n};!function(){function e(t){P(this,e),this.core=t,this.contextmenu=new W(t)}$(e,[{key:"destroy",value:function(){var e=document.getElementById("osjs-context-menu");e&&e.remove(),this.contextmenu.destroy()}},{key:"init",value:function(){var e=I(A.mark(function e(){var t,n=this;return A.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t={show:function(){var e;return(e=n.contextmenu).show.apply(e,arguments)},hide:function(){var e;return(e=n.contextmenu).hide.apply(e,arguments)}},this.core.instance("osjs/contextmenu",function(){return arguments.length?t.show.apply(t,arguments):t}),this.core.$root.addEventListener("contextmenu",function(e){G(e)||(e.stopPropagation(),e.preventDefault())});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=this,t=function(t){var n=document.getElementById("osjs-context-menu");!(n&&n.contains(t.target))&&e.contextmenu&&e.contextmenu.hide()};this.core.$root.addEventListener("click",t,!0),this.core.once("destroy",function(){e.core.$root.removeEventListener("click",t,!0)}),this.contextmenu.init()}}])}()},721(e,t,n){function r(e,t){for(var n=[],r=[],o=arguments.length;o-- >2;)n.push(arguments[o]);for(;n.length;){var i=n.pop();if(i&&i.pop)for(o=i.length;o--;)n.push(i[o]);else null!=i&&!0!==i&&!1!==i&&r.push(i)}return"function"==typeof e?e(t||{},r):{nodeName:e,attributes:t||{},children:r,key:t&&t.key}}function o(e,t,n,r){var o,i=[].map,u=r&&r.children[0]||null,a=u&&d(u),c=[],s=!0,l=m(e),f=x([],l,m(t));return h(),f;function d(e){return{nodeName:e.nodeName.toLowerCase(),attributes:{},children:i.call(e.childNodes,function(e){return 3===e.nodeType?e.nodeValue:d(e)})}}function p(e){return"function"==typeof e?p(e(l,f)):null!=e?e:""}function v(){o=!o;var e=p(n);for(r&&!o&&(u=E(r,u,a,a=e)),s=!1;c.length;)c.pop()()}function h(){o||(o=!0,setTimeout(v))}function m(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}function y(e,t,n){var r={};return e.length?(r[e[0]]=e.length>1?y(e.slice(1),t,n[e[0]]):t,m(n,r)):t}function g(e,t){for(var n=0;n<e.length;)t=t[e[n++]];return t}function x(e,t,n){for(var r in n)"function"==typeof n[r]?function(r,o){n[r]=function(r){var i=o(r);return"function"==typeof i&&(i=i(g(e,l),n)),i&&i!==(t=g(e,l))&&!i.then&&h(l=y(e,m(t,i),l)),i}}(r,n[r]):x(e.concat(r),t[r]=m(t[r]),n[r]=m(n[r]));return n}function b(e){return e?e.key:null}function w(e){return e.currentTarget.events[e.type](e)}function j(e,t,n,r,o){if("key"===t);else if("style"===t)if("string"==typeof n)e.style.cssText=n;else for(var i in"string"==typeof r&&(r=e.style.cssText=""),m(r,n)){var u=null==n||null==n[i]?"":n[i];"-"===i[0]?e.style.setProperty(i,u):e.style[i]=u}else"o"===t[0]&&"n"===t[1]?(t=t.slice(2),e.events?r||(r=e.events[t]):e.events={},e.events[t]=n,n?r||e.addEventListener(t,w):e.removeEventListener(t,w)):t in e&&"list"!==t&&"type"!==t&&"draggable"!==t&&"spellcheck"!==t&&"translate"!==t&&!o?e[t]=null==n?"":n:null!=n&&!1!==n&&e.setAttribute(t,n),(null==n||!1===n)&&e.removeAttribute(t)}function k(e,t){var n="string"==typeof e||"number"==typeof e?document.createTextNode(e):(t=t||"svg"===e.nodeName)?document.createElementNS("http://www.w3.org/2000/svg",e.nodeName):document.createElement(e.nodeName),r=e.attributes;if(r){r.oncreate&&c.push(function(){r.oncreate(n)});for(var o=0;o<e.children.length;o++)n.appendChild(k(e.children[o]=p(e.children[o]),t));for(var i in r)j(n,i,r[i],null,t)}return n}function S(e,t,n,r){for(var o in m(t,n))n[o]!==("value"===o||"checked"===o?e[o]:t[o])&&j(e,o,n[o],t[o],r);var i=s?n.oncreate:n.onupdate;i&&c.push(function(){i(e,t)})}function _(e,t){var n=t.attributes;if(n){for(var r=0;r<t.children.length;r++)_(e.childNodes[r],t.children[r]);n.ondestroy&&n.ondestroy(e)}return e}function N(e,t,n){function r(){e.removeChild(_(t,n))}var o=n.attributes&&n.attributes.onremove;o?o(t,r):r()}function E(e,t,n,r,o){if(r===n);else if(null==n||n.nodeName!==r.nodeName){var i=k(r,o);e.insertBefore(i,t),null!=n&&N(e,t,n),t=i}else if(null==n.nodeName)t.nodeValue=r;else{S(t,n.attributes,r.attributes,o=o||"svg"===r.nodeName);for(var u={},a={},c=[],l=n.children,f=r.children,d=0;d<l.length;d++){c[d]=t.childNodes[d];var v=b(l[d]);null!=v&&(u[v]=[c[d],l[d]])}for(var d=0,h=0;h<f.length;){var v=b(l[d]),m=b(f[h]=p(f[h]));if(a[v]){d++;continue}if(null!=m&&m===b(l[d+1])){null==v&&N(t,c[d],l[d]),d++;continue}if(null==m||s)null==v&&(E(t,c[d],l[d],f[h],o),h++),d++;else{var y=u[m]||[];v===m?(E(t,y[0],y[1],f[h],o),d++):y[0]?E(t,t.insertBefore(y[0],c[d]),y[1],f[h],o):E(t,c[d],null,f[h],o),a[m]=f[h],h++}}for(;d<l.length;)null==b(l[d])&&N(t,c[d],l[d]),d++;for(var d in u)a[d]||N(t,u[d][0],u[d][1])}return t}}n.d(t,{h:()=>r,y:()=>o})},587(e){e.exports={UU:"Terminal"}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}(()=>{__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}})(),(()=>{__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{__webpack_require__.r=e=>{"u">typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})();var __webpack_exports__={};return(()=>{var _metadata_json__rspack_import_0=__webpack_require__(587),hyperapp__rspack_import_2=__webpack_require__(721),_osjs_gui__rspack_import_1=__webpack_require__(836);function _type_of(e){return e&&"u">typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}var createView=function(e,t){return function(e,t){return(0,hyperapp__rspack_import_2.h)(_osjs_gui__rspack_import_1.az,{class:"osjs-terminal-window",oncreate:function(e){e.addEventListener("click",function(){var t=e.querySelector("input");t&&t.focus()})}},[(0,hyperapp__rspack_import_2.h)("div",{class:"terminal-output",onupdate:function(e){e.scrollTop=e.scrollHeight}},e.history.map(function(e){return(0,hyperapp__rspack_import_2.h)("div",{},[(0,hyperapp__rspack_import_2.h)("div",{class:"command"},"> ".concat(e.command)),(0,hyperapp__rspack_import_2.h)("div",{class:e.error?"error":"result"},e.result)])})),(0,hyperapp__rspack_import_2.h)("div",{class:"terminal-input-area"},[(0,hyperapp__rspack_import_2.h)("span",{},">"),(0,hyperapp__rspack_import_2.h)("input",{type:"text",value:e.input,oninput:function(e){return t.setInput(e.target.value)},onkeydown:function(e){"Enter"===e.key&&t.run()},oncreate:function(e){return e.focus()}})])])}},register=function(core,args,options,metadata){var proc=core.make("osjs/application",{args:args,options:options,metadata:metadata}),icon=core.make("osjs/theme").icon,winIcon=icon(metadata.icon);return proc.createWindow({id:"TerminalWindow",title:metadata.title.en_EN,icon:winIcon,dimension:{width:600,height:400}}).on("destroy",function(){return proc.destroy()}).render(function($content){(0,hyperapp__rspack_import_2.y)({input:"",history:[{command:"System",result:"Welcome to KanameOS Terminal. Type JavaScript commands to execute them.",error:!1}]},{setInput:function(e){return function(t){return{input:e}}},run:function(){return function(state){var result,command=state.input;if(command){var os=core,_$app=proc,listPackages=function(){return core.make("osjs/packages").getPackages().map(function(e){return e.name})},systemctl=function(e,t){var n="webos/services",r=function(){var e=os.listProviders();localStorage.setItem(n,JSON.stringify(e))};if("list"===e){var o=os.listProviders();return Object.keys(os.serviceClasses||{}).map(function(e){return"".concat(e," [").concat(o.includes(e)?"RUNNING":"STOPPED","]")}).join("\n")}if("start"===e){if(!t)return'Usage: systemctl("start", "ServiceName")';if(os.listProviders().includes(t))return"Service ".concat(t," is already running");var i=(os.serviceClasses||{})[t];return i?os.register(i,{name:t}).then(function(){return r(),"Service ".concat(t," started")}).catch(function(e){return"Failed to start ".concat(t,": ").concat(e.message)}):"Service class ".concat(t," not found")}if("stop"===e)return t?os.unregister(t).then(function(e){return e?(r(),"Service ".concat(t," stopped")):"Service ".concat(t," not found")}):'Usage: systemctl("stop", "ServiceName")';if("enable"===e){if(!t)return'Usage: systemctl("enable", "ServiceName")';var u=JSON.parse(localStorage.getItem(n)||"[]");return u.includes(t)?"Service ".concat(t," already enabled"):(u.push(t),localStorage.setItem(n,JSON.stringify(u)),"Service ".concat(t," enabled for next boot"))}if("disable"===e){if(!t)return'Usage: systemctl("disable", "ServiceName")';var a=JSON.parse(localStorage.getItem(n)||"[]"),c=a.indexOf(t);return -1!==c?(a.splice(c,1),localStorage.setItem(n,JSON.stringify(a)),"Service ".concat(t," disabled for next boot")):"Service ".concat(t," not enabled")}return'Usage: systemctl("list" | "start" | "stop" | "enable" | "disable", [name])'},error=!1;try{var evalResult=eval(command);if((void 0===evalResult?"undefined":_type_of(evalResult))==="object"&&null!==evalResult)try{result=JSON.stringify(evalResult,null,2)}catch(e){result=String(evalResult)}else result=String(evalResult)}catch(e){result=e.message,error=!0}return{input:"",history:state.history.concat({command:command,result:result,error:error})}}}}},createView(core,proc),$content)}),proc};OSjs.make("osjs/packages").register(_metadata_json__rspack_import_0.UU,register);var __rspack_default_export=register})(),(()=>{__webpack_require__.r(__webpack_exports__)})(),__webpack_exports__})());
//# sourceMappingURL=main.js.map