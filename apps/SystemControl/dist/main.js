!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.SystemControl=t():e.SystemControl=t()}(self,()=>(()=>{"use strict";var e={};e.r=e=>{"u">typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var t={};return(()=>{var e,t=JSON.parse('{"UU":"SystemControl"}');function n(e,t){for(var n=[],r=[],o=arguments.length;o-- >2;)n.push(arguments[o]);for(;n.length;){var i=n.pop();if(i&&i.pop)for(o=i.length;o--;)n.push(i[o]);else null!=i&&!0!==i&&!1!==i&&r.push(i)}return"function"==typeof e?e(t||{},r):{nodeName:e,attributes:t||{},children:r,key:t&&t.key}}function r(e,t){return null!=t&&"u">typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function o(e){return e&&"u">typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function u(e,t){return e(t={exports:{}},t.exports),t.exports}var s=u(function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r},e.exports.default=e.exports,e.exports.__esModule=!0});i(s);var c=u(function(e){e.exports=function(e){if(Array.isArray(e))return s(e)},e.exports.default=e.exports,e.exports.__esModule=!0});i(c);var a=u(function(e){e.exports=function(e){if("u">typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0});i(a);var l=u(function(e){e.exports=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0});i(l);var f=u(function(e){e.exports=function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0});i(f);var p=i(u(function(e){e.exports=function(e){return c(e)||a(e)||l(e)||f()},e.exports.default=e.exports,e.exports.__esModule=!0}));function d(e,t){for(var n=[],r=[],o=arguments.length;2<o--;)n.push(arguments[o]);for(;n.length;){var i=n.pop();if(i&&i.pop)for(o=i.length;o--;)n.push(i[o]);else null!=i&&!0!==i&&!1!==i&&r.push(i)}return"function"==typeof e?e(t||{},r):{nodeName:e,attributes:t||{},children:r,key:t&&t.key}}function h(e,t,n,r){function o(e){return"function"==typeof e?o(e(b,x)):null==e?"":e}function i(){d=!d;var e=o(n);for(r&&!d&&(v=function e(t,n,r,i,u){if(i===r);else if(null==r||r.nodeName!==i.nodeName){var c=function e(t,n){var r="string"==typeof t||"number"==typeof t?document.createTextNode(t):(n=n||"svg"===t.nodeName)?document.createElementNS("http://www.w3.org/2000/svg",t.nodeName):document.createElement(t.nodeName),i=t.attributes;if(i){i.oncreate&&y.push(function(){i.oncreate(r)});for(var u=0;u<t.children.length;u++)r.appendChild(e(t.children[u]=o(t.children[u]),n));for(var s in i)f(r,s,i[s],null,n)}return r}(i,u);t.insertBefore(c,n),null!=r&&p(t,n,r),n=c}else if(null==r.nodeName)n.nodeValue=i;else{!function(e,t,n,r){for(var o in s(t,n))n[o]!==("value"==o||"checked"===o?e[o]:t[o])&&f(e,o,n[o],t[o],r);var i=g?n.oncreate:n.onupdate;i&&y.push(function(){i(e,t)})}(n,r.attributes,i.attributes,u=u||"svg"===i.nodeName);for(var l={},d={},h=[],v=r.children,m=i.children,b=0;b<v.length;b++){h[b]=n.childNodes[b];var x=a(v[b]);null!=x&&(l[x]=[h[b],v[b]])}for(var b=0,w=0;w<m.length;){var x=a(v[b]),j=a(m[w]=o(m[w]));if(d[x]){b++;continue}if(null!=j&&j===a(v[b+1])){null==x&&p(n,h[b],v[b]),b++;continue}if(null==j||g)null==x&&(e(n,h[b],v[b],m[w],u),w++),b++;else{var k=l[j]||[];x===j?(e(n,k[0],k[1],m[w],u),b++):k[0]?e(n,n.insertBefore(k[0],h[b]),k[1],m[w],u):e(n,h[b],null,m[w],u),d[j]=m[w],w++}}for(;b<v.length;)null==a(v[b])&&p(n,h[b],v[b]),b++;for(var b in l)d[b]||p(n,l[b][0],l[b][1])}return n}(r,v,m,m=e)),g=!1;y.length;)y.pop()()}function u(){d||(d=!0,setTimeout(i))}function s(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}function c(e,t){for(var n=0;n<e.length;)t=t[e[n++]];return t}function a(e){return e?e.key:null}function l(e){return e.currentTarget.events[e.type](e)}function f(e,t,n,r,o){if("key"===t);else if("style"!==t)"o"===t[0]&&"n"===t[1]?(t=t.slice(2),e.events?r||(r=e.events[t]):e.events={},e.events[t]=n,n?r||e.addEventListener(t,l):e.removeEventListener(t,l)):t in e&&"list"!==t&&"type"!==t&&"draggable"!==t&&"spellcheck"!==t&&"translate"!==t&&!o?e[t]=null==n?"":n:null!=n&&!1!==n&&e.setAttribute(t,n),(null==n||!1===n)&&e.removeAttribute(t);else if("string"==typeof n)e.style.cssText=n;else for(var i in"string"==typeof r&&(r=e.style.cssText=""),s(r,n)){var u=null==n||null==n[i]?"":n[i];"-"===i[0]?e.style.setProperty(i,u):e.style[i]=u}}function p(e,t,n){function r(){e.removeChild(function e(t,n){var r=n.attributes;if(r){for(var o=0;o<n.children.length;o++)e(t.childNodes[o],n.children[o]);r.ondestroy&&r.ondestroy(t)}return t}(t,n))}var o=n.attributes&&n.attributes.onremove;o?o(t,r):r()}var d,h=[].map,v=r&&r.children[0]||null,m=v&&function e(t){return{nodeName:t.nodeName.toLowerCase(),attributes:{},children:h.call(t.childNodes,function(t){return 3===t.nodeType?t.nodeValue:e(t)})}}(v),y=[],g=!0,b=s(e),x=function e(t,n,r){for(var o in r)"function"==typeof r[o]?function(e,o){r[e]=function(e){var i=o(e);return"function"==typeof i&&(i=i(c(t,b),r)),i&&i!==(n=c(t,b))&&!i.then&&u(b=function e(t,n,r){var o={};return t.length?(o[t[0]]=1<t.length?e(t.slice(1),n,r[t[0]]):n,s(r,o)):n}(t,s(n,i),b)),i}}(o,r[o]):e(t.concat(o),n[o]=s(n[o]),r[o]=s(r[o]));return r}([],b,s(t));return u(),x}var v=function(e,t){return"number"==typeof e?"".concat(e,"px"):!1===e?t:e},m={grow:function(e){return{flexGrow:e}},shrink:function(e){return{flexShrink:e}},basis:function(e){return{flexBasis:v(e,"auto")}},align:function(e){return{alignItems:e}},justify:function(e){return{justifyContent:e}},padding:function(e){return{margin:v(e,"0")}},margin:function(e){return{margin:v(e,"0")}}},y=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=["osjs-gui"].concat(p(r(e.class,Array)?e.class:[e.class]));e.orientation&&n.push("osjs-gui-"+e.orientation);var o="string"==typeof e.style?{}:Object.assign({},e.style||{}),i=Object.keys(e).reduce(function(t,n){return Object.assign({},t,m[n]?m[n](e[n]):void 0)},o);return d("div",{oncreate:e.oncreate,ondestroy:e.ondestroy,class:n.filter(function(e){return!!e}).join(" "),style:i},t)},g=function(e,t){return d(y,Object.assign({orientation:"horizontal"},e,{class:["osjs-gui-box",e.class]}),t)},b=i(u(function(e){function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0,t(n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0})),x=function(e){var t=e&&"object"===b(e)?e.src:e;return d("i",{"data-icon":e&&"object"===b(e)?e.name:void 0,class:"osjs-icon",style:{backgroundImage:"string"==typeof e?"url(".concat(t,")"):void 0}})},w=i(u(function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0})),j=function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:250,n=!1;return function(r,o){return(e=clearTimeout(e),e=setTimeout(function(){return n=!1},t),n)?(r.preventDefault(),o(r)):(n=!0,!1)}},k=function(e,t,n,r,o){var i,u=t.oninput||function(){},s=t.onchange||function(){},c=t.onkeydown||function(){},a=o||function(e){return[e.target.value]},l=Object.assign({oninput:function(e){return u.apply(void 0,[e].concat(p(a(e))))},onchange:function(e){return s.apply(void 0,[e].concat(p(a(e))))},onkeydown:function(e){13===e.keyCode&&t.onenter&&t.onenter.apply(t,[e].concat(p(a(e)))),c(e)}},n,(i=["choices","label","box","oninput","onchange"],Object.keys(t).filter(function(e){return -1===i.indexOf(e)}).reduce(function(e,n){return Object.assign(w({},n,t[n]),e)},{})));return d(y,Object.assign({},t.box||{},{class:"osjs-gui-field osjs-gui-"+e}),r(l))},_=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return k("button",e,{},function(n){var r=[];return e.icon&&r.push(d(x,e.icon)),"string"==typeof e.label&&r.push(d("span",{class:"osjs-label"},e.label)),d("button",n,[].concat(r,p(t)))})},S=function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=function(e){var t=[];return"checkbox"===e.type||"boolean"==typeof e.checked?t.push(d("span",{class:"osjs-gui-menu-checkbox "+(e.checked?"active":"")})):e.icon&&t.push(d(x,e.icon)),t.push(d("span",{},e.label)),t},i=function(t,n){if("function"==typeof n.element)return n.element();var i=[d("span",{class:"separator"===n.type?"osjs-gui-menu-separator":"osjs-gui-menu-label "+(n.disabled?"osjs__disabled":"")},o(n))];return n.items&&i.push(e(t,n.items,r+1)),i};return d("ul",{class:""},n.map(function(e){return d("li",{class:"osjs-gui-menu-entry"},[d("div",{class:"osjs-gui-menu-container","data-has-image":!!e.icon||void 0,"data-has-children":!!e.items||void 0,onmouseover:e.items?t.onshow:void 0,ontouchend:e.items?t.onshow:void 0,onclick:function(n){e.items||(e.onclick&&e.onclick(e,n),t.onclick&&t.onclick(e,n,e))}},i(t,e))])}))},E=function(e){return d("div",{id:"osjs-context-menu",className:"osjs-gui osjs-gui-menu",oncreate:e.oncreate,onupdate:e.onupdate,style:{display:!1===e.visible?"none":"block",top:e.position?e.position.top+"px":0,left:e.position?e.position.left+"px":0}},S(e,e.menu))};function N(e,t,n,r){return t._$r=function(){return{}},function(o,i){return d(r||"x-",{key:o.key,id:o.id,class:o.class,oncreate:function(r){var u=h(e,t,function(e,t){var o=n(e,t);return"function"==typeof o&&(o=o(r._$p,r._$c)),o},r);r._$p=o,r._$c=i,r._$r=u._$r,r._$u=u.uninit,u.init&&u.init(o),o.oncreate&&o.oncreate(r)},onupdate:function(e){e._$p=o,e._$c=i,e._$r(),o.onupdate&&o.onupdate(e)},ondestroy:function(e){e._$u&&e._$u()},onremove:function(e,t){return o.onremove?void o.onremove(e,t):t()}})}}var L=function(e,t,n){var r=Math.min,o=e.target,i=e.clientX,u=e.clientY,s=o.previousSibling,c=s.offsetWidth,a=s.offsetHeight,l=Array.from(o.parentNode.children).indexOf(s),f=.8*s.parentNode.offsetWidth,p=.8*s.parentNode.offsetHeight;if(!(0>l)){var d=function(e){e.preventDefault();var o="vertical"===n?c:a;o="vertical"===n?r(f,o+(e.clientX-i)):r(p,o+(e.clientY-u)),t.setSize({index:l,size:o})};e.preventDefault(),document.addEventListener("mousemove",d),document.addEventListener("mouseup",function e(t){t.preventDefault(),document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",e)})}},O=function(e,t,n,r){var o=Array(Math.ceil(n.length/2)).fill(null).map(function(){return d("div",{class:"osjs-gui-panes-spacer",onmousedown:function(e){return L(e,t,r)}})});return n.map(function(t,n){var r=e.sizes[n]?e.sizes[n]+"px":void 0;return d("div",{class:"osjs-gui-panes-pane",style:{flex:r?"0 0 ".concat(r):r}},t)}).map(function(e,t){return[e,o[t]]}).reduce(function(e,t){return e.concat(t)}).filter(function(e){return void 0!==e})},T=(N({sizes:[]},{init:function(e){return{sizes:e.sizes||[150]}},setSize:function(e){var t=e.index,n=e.size;return function(e){var r=[].concat(e.sizes);return r[t]=n,{sizes:r}}}},function(e,t){return function(n,r){var o=n.orientation||"vertical";return d(y,{orientation:o,class:"osjs-gui-panes-inner"},O(e,t,r,o))}},"div"),j(),j(),function(e,t,n){var r=e.labels,o=e.onchange,i=e.oncontextmenu;return(r||[]).map(function(e,r){return d("div",{class:t.selectedIndex===r?"osjs__active":"",oncontextmenu:function(t){(i||function(){})(t,r,e)},onclick:function(t){n.setSelectedIndex(r),(o||function(){})(t,r,e)}},d("span",{},e))})}),$=i((N({selectedIndex:0},{init:function(e){return{selectedIndex:e.selectedIndex||0}},setSelectedIndex:function(e){return function(){return{selectedIndex:e}}}},function(e,t){return function(n,r){return d("div",{class:"osjs-gui-tabs-wrapper"},[d("div",{class:"osjs-gui-tabs-header"},T(n,e,t)),d("div",{class:"osjs-gui-tabs-panes"},r.map(function(t,n){return d("div",{class:e.selectedIndex===n?"osjs__active":""},t)}))])}},"div"),N({active:!0},{init:function(e){return{ative:!1!==e.active}},ontoggle:function(e){var t=e.ev,n=e.active;return(e.ontoggle||function(){})(t,n),{active:n}}},function(e,t){return function(n,r){return d(y,Object.assign({},n.box||{},{class:["osjs-gui-expander-wrapper"]}),[d("div",{class:"osjs-gui-expander-header",onclick:function(r){return t.ontoggle({ev:r,active:!e.active,ontoggle:n.ontoggle})}},[d("div",{class:"osjs-gui-expander-header-icon","data-active":e.active+""}),d("div",{class:"osjs-gui-expander-header-label"},n.label)]),d("div",{class:"osjs-gui-expander-content",style:{display:!1===e.active?"none":void 0}},r)])}},"div"),u(function(e){function t(e,t,n,r,o,i,u){try{var s=e[i](u),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise(function(o,i){function u(e){t(c,o,i,u,s,"next",e)}function s(e){t(c,o,i,u,s,"throw",e)}var c=e.apply(n,r);u(void 0)})}},e.exports.default=e.exports,e.exports.__esModule=!0}))),P=i(u(function(e){e.exports=function(e,t){if(!r(e,t))throw TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0})),C=i(u(function(e){function t(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e},e.exports.default=e.exports,e.exports.__esModule=!0})),I=u(function(e){var t=function(e){function t(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}function n(e,t,n,o){var s,c,a,l,f=Object.create((t&&r(t.prototype,u)?t:u).prototype);return s=e,c=n,a=new d(o||[]),l="suspendedStart",f._invoke=function(e,t){if("executing"===l)throw Error("Generator is already running");if("completed"===l){if("throw"===e)throw t;return v()}for(a.method=e,a.arg=t;;){var n=a.delegate;if(n){var r=function e(t,n){var r=t.iterator[n.method];if(r===m){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=m,e(t,n),"throw"===n.method))return k;n.method="throw",n.arg=TypeError("The iterator does not provide a 'throw' method")}return k}var o=i(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,k;var u=o.arg;return u?u.done?(n[t.resultName]=u.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=m),n.delegate=null,k):u:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,k)}(n,a);if(r){if(r===k)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===l)throw l="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);l="executing";var o=i(s,c,a);if("normal"===o.type){if(l=a.done?"completed":"suspendedYield",o.arg===k)continue;return{value:o.arg,done:a.done}}"throw"===o.type&&(l="completed",a.method="throw",a.arg=o.arg)}},f}function i(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function u(){}function s(){}function c(){}function a(e){["next","throw","return"].forEach(function(n){t(e,n,function(e){return this._invoke(n,e)})})}function l(e,t){var n;this._invoke=function(r,u){function s(){return new t(function(n,s){!function n(r,u,s,c){var a=i(e[r],e,u);if("throw"===a.type)c(a.arg);else{var l=a.arg,f=l.value;return f&&"object"==(void 0===f?"undefined":o(f))&&g.call(f,"__await")?t.resolve(f.__await).then(function(e){n("next",e,s,c)},function(e){n("throw",e,s,c)}):t.resolve(f).then(function(e){l.value=e,s(l)},function(e){return n("throw",e,s,c)})}}(r,u,n,s)})}return n=n?n.then(s,s):s()}}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function p(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function d(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function h(e){if(e){var t=e[x];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(g.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=m,t.done=!0,t};return r.next=r}}return{next:v}}function v(){return{value:m,done:!0}}var m,y=Object.prototype,g=y.hasOwnProperty,b="function"==typeof Symbol?Symbol:{},x=b.iterator||"@@iterator",w=b.asyncIterator||"@@asyncIterator",j=b.toStringTag||"@@toStringTag";try{t({},"")}catch(e){t=function(e,t,n){return e[t]=n}}e.wrap=n;var k={},_={};t(_,x,function(){return this});var S=Object.getPrototypeOf,E=S&&S(S(h([])));E&&E!==y&&g.call(E,x)&&(_=E);var N=c.prototype=u.prototype=Object.create(_);return s.prototype=c,t(N,"constructor",c),t(c,"constructor",s),s.displayName=t(c,j,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===s||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,t(e,j,"GeneratorFunction")),e.prototype=Object.create(N),e},e.awrap=function(e){return{__await:e}},a(l.prototype),t(l.prototype,w,function(){return this}),e.AsyncIterator=l,e.async=function(t,r,o,i,u){void 0===u&&(u=Promise);var s=new l(n(t,r,o,i),u);return e.isGeneratorFunction(r)?s:s.next().then(function(e){return e.done?e.value:s.next()})},a(N),t(N,j,"Generator"),t(N,x,function(){return this}),t(N,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=h,d.prototype={constructor:d,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=m,this.done=!1,this.delegate=null,this.method="next",this.arg=m,this.tryEntries.forEach(p),!e)for(var t in this)"t"===t.charAt(0)&&g.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=m)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,r){return i.type="throw",i.arg=e,n.next=t,r&&(n.method="next",n.arg=m),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;0<=r;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var u=g.call(o,"catchLoc"),s=g.call(o,"finallyLoc");if(u&&s){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else if(s){if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else throw Error("try statement without catch or finally")}}},abrupt:function(e,t){for(var n,r=this.tryEntries.length-1;0<=r;--r)if((n=this.tryEntries[r]).tryLoc<=this.prev&&g.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,k):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),k},finish:function(e){for(var t,n=this.tryEntries.length-1;0<=n;--n)if((t=this.tryEntries[n]).finallyLoc===e)return this.complete(t.completion,t.afterLoc),p(t),k},catch:function(e){for(var t,n=this.tryEntries.length-1;0<=n;--n)if((t=this.tryEntries[n]).tryLoc===e){var r=t.completion;if("throw"===r.type){var o=r.arg;p(t)}return o}throw Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:h(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=m),k}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==("u"<typeof globalThis?"undefined":o(globalThis))?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}),A=function(e,t){var n=t.target.querySelector("ul");n&&(n.classList.contains("osjs-gui-menu-container")&&(n=n.parentNode.parentNode),n&&n.offsetParent)&&(n.classList.remove("clamp-right"),n.getBoundingClientRect().right>e.offsetWidth&&n.classList.add("clamp-right"))},M=function(e,t,n){var r={},o=n.top+t.offsetHeight,i=n.left+t.offsetWidth,u=e.offsetHeight-n.top,s=e.offsetWidth-n.left,c=i>e.offsetWidth,a=o>e.offsetHeight;return a&&e.offsetHeight>t.offsetHeight&&(r.top=e.offsetHeight-t.offsetHeight-u),c&&(r.left=e.offsetWidth-t.offsetWidth-s),a||c?r:null},z=function(e){return e(),setTimeout(e,100)},B=function(){function e(t){P(this,e),this.core=t,this.callback=function(){},this.actions=null,this.$element=document.createElement("div")}return C(e,[{key:"destroy",value:function(){this.callback=null,this.actions=null}},{key:"init",value:function(){var e,t,n=this;this.$element.className="osjs-system-context-menu",this.core.$root.appendChild(this.$element);var o=!1;this.actions=h({visible:!1,menu:[],position:{top:0,left:0}},{clamp:function(e){return function(r){if(e=e||document.querySelector("#osjs-context-menu"),clearTimeout(t),e){var o=M(n.core.$root,e,r.position);if(o)return{position:o}}return{}}},onshow:function(e){return function(){t=z(function(){return A(n.core.$root,e)})}},show:function(e){return function(t,i){var u=e.menu,s=e.position;if(e.toggle&&o)return i.hide();if(r(s,Event))s={left:s.clientX,top:s.clientY};else if(r(s,Element)){var c=s.getBoundingClientRect();s={left:c.left,top:c.top+c.height}}return n.callback=function(t,n,r){e.callback&&e.callback(t,n),!1!==r.closeable&&i.hide()},o=!0,n.onclose=e.onclose,z(function(){return i.clamp()}),{visible:!0,menu:u||[],position:s||{top:0,left:0}}}},hide:function(){return function(){return o&&setTimeout(function(){return o=!1},0),n.onclose&&n.onclose(),n.onclose=null,n.callback=null,{visible:!1}}}},(e=function(){!n.core.destroyed&&n.callback&&n.callback.apply(n,arguments)},function(t,n){return d(E,{position:t.position,visible:t.visible,menu:t.menu,onclick:e,onshow:n.onshow})}),this.$element)}},{key:"show",value:function(){var e;return this.actions?(e=this.actions).show.apply(e,arguments):null}},{key:"hide",value:function(){var e;return this.actions?(e=this.actions).hide.apply(e,arguments):null}}]),e}(),D=function(e){var t=e.target,n="TEXTAREA"===t.tagName;return n||"INPUT"!==t.tagName||(n=-1!==["text","password","number","email"].indexOf(t.type)),n};C(function e(t){P(this,e),this.core=t,this.contextmenu=new B(t)},[{key:"destroy",value:function(){var e=document.getElementById("osjs-context-menu");e&&e.remove(),this.contextmenu.destroy()}},{key:"init",value:(e=$(I.mark(function e(){var t,n=this;return I.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t={show:function(){var e;return(e=n.contextmenu).show.apply(e,arguments)},hide:function(){var e;return(e=n.contextmenu).hide.apply(e,arguments)}},this.core.instance("osjs/contextmenu",function(){return arguments.length?t.show.apply(t,arguments):t}),this.core.$root.addEventListener("contextmenu",function(e){D(e)||(e.stopPropagation(),e.preventDefault())});case 3:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"start",value:function(){var e=this,t=function(t){var n=document.getElementById("osjs-context-menu");!(n&&n.contains(t.target))&&e.contextmenu&&e.contextmenu.hide()};this.core.$root.addEventListener("click",t,!0),this.core.once("destroy",function(){e.core.$root.removeEventListener("click",t,!0)}),this.contextmenu.init()}}]),OSjs.make("osjs/packages").register(t.UU,function(e,t,r,o){var i=e.make("osjs/application",{args:t,options:r,metadata:o}),u=e.make("webos/service"),s=Object.keys(e.serviceClasses||{}),c=function(){var t=e.listProviders(),n=u.getEnabledServices();return s.map(function(e){return{name:e,running:t.includes(e),enabled:n.includes(e)}})},a=function(e,t){t?u.enableService(e):u.disableService(e)};return i.createWindow({id:"SystemControlWindow",title:o.title.en_EN,icon:i.resource(o.icon),dimension:{width:500,height:400}}).on("destroy",function(){return i.destroy()}).render(function(t){var r=function(t){for(var r=e.serviceDefinitions||{},o=t.services,i=function(e){var t=r[e];return t&&t.options&&t.options.depends?t.options.depends:[]},u=[],s=new Set,c=o.map(function(e){return e.name}),a=0;c.length>0&&a<10&&"break"!==function(){var e=[],t=[];if(c.forEach(function(n){if(i(n),"CoreServiceProvider"===n&&!s.has(n))return void e.push(n);if("CoreServiceProvider"===n)e.push(n);else{var r=i(n);0===r.length?e.push(n):r.every(function(e){return"osjs/core"===e})?s.has("CoreServiceProvider")?e.push(n):t.push(n):s.size>1?e.push(n):t.push(n)}}),0===e.length&&t.length>0)return u.push(t),"break";e.length>0&&(u.push(e),e.forEach(function(e){return s.add(e)}),c=t),a++}(););return n("div",{class:"graph-view"},u.map(function(e,r){return n("div",{class:"level"},e.map(function(e){var r=t.services.find(function(t){return t.name===e})||{name:e,running:!1},o=i(e);return n("div",{class:"node ".concat(r.running?"running":"stopped"),title:"Depends on: ".concat(o.join(", ")||"None")},[n("span",{class:"name"},r.name),n("span",{class:"status"},r.running?"Running":"Stopped")])}))}))};!function(e,t,n,r){var o,i=[].map,u=r&&r.children[0]||null,s=u&&function e(t){return{nodeName:t.nodeName.toLowerCase(),attributes:{},children:i.call(t.childNodes,function(t){return 3===t.nodeType?t.nodeValue:e(t)})}}(u),c=[],a=!0,l=v(e),f=function e(t,n,r){for(var o in r)"function"==typeof r[o]?function(e,o){r[e]=function(e){var i=o(e);return"function"==typeof i&&(i=i(m(t,l),r)),i&&i!==(n=m(t,l))&&!i.then&&h(l=function e(t,n,r){var o={};return t.length?(o[t[0]]=t.length>1?e(t.slice(1),n,r[t[0]]):n,v(r,o)):n}(t,v(n,i),l)),i}}(o,r[o]):e(t.concat(o),n[o]=v(n[o]),r[o]=v(r[o]));return r}([],l,v(t));return h();function p(e){return"function"==typeof e?p(e(l,f)):null!=e?e:""}function d(){o=!o;var e=p(n);for(r&&!o&&(u=function e(t,n,r,o,i){if(o===r);else if(null==r||r.nodeName!==o.nodeName){var u=function e(t,n){var r="string"==typeof t||"number"==typeof t?document.createTextNode(t):(n=n||"svg"===t.nodeName)?document.createElementNS("http://www.w3.org/2000/svg",t.nodeName):document.createElement(t.nodeName),o=t.attributes;if(o){o.oncreate&&c.push(function(){o.oncreate(r)});for(var i=0;i<t.children.length;i++)r.appendChild(e(t.children[i]=p(t.children[i]),n));for(var u in o)b(r,u,o[u],null,n)}return r}(o,i);t.insertBefore(u,n),null!=r&&x(t,n,r),n=u}else if(null==r.nodeName)n.nodeValue=o;else{!function(e,t,n,r){for(var o in v(t,n))n[o]!==("value"===o||"checked"===o?e[o]:t[o])&&b(e,o,n[o],t[o],r);var i=a?n.oncreate:n.onupdate;i&&c.push(function(){i(e,t)})}(n,r.attributes,o.attributes,i=i||"svg"===o.nodeName);for(var s={},l={},f=[],d=r.children,h=o.children,m=0;m<d.length;m++){f[m]=n.childNodes[m];var g=y(d[m]);null!=g&&(s[g]=[f[m],d[m]])}for(var m=0,w=0;w<h.length;){var g=y(d[m]),j=y(h[w]=p(h[w]));if(l[g]){m++;continue}if(null!=j&&j===y(d[m+1])){null==g&&x(n,f[m],d[m]),m++;continue}if(null==j||a)null==g&&(e(n,f[m],d[m],h[w],i),w++),m++;else{var k=s[j]||[];g===j?(e(n,k[0],k[1],h[w],i),m++):k[0]?e(n,n.insertBefore(k[0],f[m]),k[1],h[w],i):e(n,f[m],null,h[w],i),l[j]=h[w],w++}}for(;m<d.length;)null==y(d[m])&&x(n,f[m],d[m]),m++;for(var m in s)l[m]||x(n,s[m][0],s[m][1])}return n}(r,u,s,s=e)),a=!1;c.length;)c.pop()()}function h(){o||(o=!0,setTimeout(d))}function v(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}function m(e,t){for(var n=0;n<e.length;)t=t[e[n++]];return t}function y(e){return e?e.key:null}function g(e){return e.currentTarget.events[e.type](e)}function b(e,t,n,r,o){if("key"===t);else if("style"===t)if("string"==typeof n)e.style.cssText=n;else for(var i in"string"==typeof r&&(r=e.style.cssText=""),v(r,n)){var u=null==n||null==n[i]?"":n[i];"-"===i[0]?e.style.setProperty(i,u):e.style[i]=u}else"o"===t[0]&&"n"===t[1]?(t=t.slice(2),e.events?r||(r=e.events[t]):e.events={},e.events[t]=n,n?r||e.addEventListener(t,g):e.removeEventListener(t,g)):t in e&&"list"!==t&&"type"!==t&&"draggable"!==t&&"spellcheck"!==t&&"translate"!==t&&!o?e[t]=null==n?"":n:null!=n&&!1!==n&&e.setAttribute(t,n),(null==n||!1===n)&&e.removeAttribute(t)}function x(e,t,n){function r(){e.removeChild(function e(t,n){var r=n.attributes;if(r){for(var o=0;o<n.children.length;o++)e(t.childNodes[o],n.children[o]);r.ondestroy&&r.ondestroy(t)}return t}(t,n))}var o=n.attributes&&n.attributes.onremove;o?o(t,r):r()}}({tab:"list",services:c()},{setTab:function(e){return{tab:e}},refresh:function(){return function(e){return{services:c()}}},toggleRun:function(t){var n=t.name,r=t.running;return function(t,o){var i;("start"==(i=r?"stop":"start")?u.startService(n,e.serviceDefinitions):"stop"===i?u.stopService(n):void 0).then(function(){return o.refresh()}).catch(function(e){return console.error(e)})}},toggleBoot:function(e){var t=e.name,n=e.enabled;return function(e,r){a(t,!n),r.refresh()}}},function(e,t){return n(g,{class:"osjs-system-control-window"},[n("div",{class:"toolbar"},[n(_,{onclick:function(){return t.setTab("list")},label:"Service List",disabled:"list"===e.tab}),n(_,{onclick:function(){return t.setTab("graph")},label:"Dependency Graph",disabled:"graph"===e.tab})]),"list"===e.tab?n("div",{class:"service-list"},e.services.map(function(e){return n("div",{class:"service-item"},[n("div",{class:"info"},[n("span",{class:"name"},e.name),n("span",{class:"status ".concat(e.running?"running":"stopped")},e.running?"Running":"Stopped")]),n("div",{class:"controls"},[n(_,{onclick:function(){return t.toggleRun(e)},label:e.running?"Stop":"Start"}),n(_,{onclick:function(){return t.toggleBoot(e)},label:e.enabled?"Disable Boot":"Enable Boot",disabled:"CoreServiceProvider"===e.name})])])})):r(e)])},t)}),i})})(),e.r(t),t})());
//# sourceMappingURL=main.js.map